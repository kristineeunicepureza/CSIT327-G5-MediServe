{% extends 'base.html' %}
{% load static %}

{% block title %}Medicine Records{% endblock %}

{% block content %}
    <div class="left-panel" style="flex: 0.3; background-color: #f7f9fa; padding: 20px;">
        <h3 style="color: #dc3545; margin-bottom: 20px;">Filters</h3>
        <button class="btn" style="width: 100%; margin-bottom: 15px; background-color: #ffc107; color: #333; cursor: not-allowed;">
            <i class="fas fa-filter"></i> Filter by Action
        </button>
        <a href="{% url 'admin_menu' %}" class="btn-secondary" style="width: 100%; margin-top: 20px;">
            <i class="fas fa-arrow-left"></i> Back to Admin Menu
        </a>
    </div>

    <div class="right-panel" style="flex: 0.7; background-color: #FFFFFF; color: #36489e; text-align: left; padding: 40px; justify-content: start;">
        <h2>Medicine Transaction Records</h2>
        <p style="color: #555; margin-bottom: 20px;">A log of all your medicine order transactions.</p>

        <div class="records-list-view" style="max-height: 70vh; overflow-y: auto; width: 100%; border: 1px solid #ddd; padding: 10px; border-radius: 5px;">
            {% for record in records %}
                <div class="admin-item-row" style="border-bottom: 1px solid #eee; padding: 15px 0; display: flex; justify-content: space-between; align-items: center; position: relative;">
                    <div style="flex-grow: 1;">
                        <strong style="font-size: 1.1em;">{{ record.medicine.name }}</strong>
                        {% if record.medicine.brand %}<span style="color: #6c757d;"> - {{ record.medicine.brand }}</span>{% endif %}
                        <br>
                        <small style="color: #777;">
                            Order #{{ record.order.id }} |
                            Date: {{ record.order.completed_at|date:"M d, Y" }} |
                            Quantity: {{ record.quantity }}
                        </small>
                        {% if record.special_request %}
                            <br><small style="color: #dc3545; font-style: italic;">Note: {{ record.special_request }}</small>
                        {% endif %}
                    </div>

                    <span style="background-color: #28a745; color: #FFFFFF; padding: 8px 15px; border-radius: 4px; font-size: 0.9em;">
                        Completed
                    </span>
                </div>
            {% empty %}
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 3em; color: #dee2e6; margin-bottom: 15px;">
                        <i class="fas fa-clipboard-list"></i>
                    </div>
                    <p>No transaction records found.</p>
                    <p style="color: #6c757d;">Complete some orders to see your medicine records here.</p>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}